<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="robots" content="index,follow">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
  <title>virtualenv Bootstrapping - Parente's Mindtrove</title>

    <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="../feed/index.xml" />
    <link rel="alternate" type="application/atom+xml" title="Atom 1.0" href="../feed/atom/index.xml" />
    <link rel="stylesheet" type="text/css" href="../static/css/pygments.css" />
    <link rel="stylesheet" href='//fonts.googleapis.com/css?family=Dosis:300,600' type='text/css'>
    <link rel="stylesheet" href='//fonts.googleapis.com/css?family=Gentium+Basic' type='text/css'>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
    <link rel="stylesheet" href="../static/css/site.css" type="text/css" media="screen" />

    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-50187496-1', 'mindtrove.info');
      ga('send', 'pageview');

    </script>
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <header id="siteTitle">
        <h1><a href="../">Parente's Mindtrove</a></h1>
        <nav>
          <a href="../">Latest</a>
          <a href="../posts/">Posts</a>
          <a href="../about/">About</a>
        </nav>
      </header>

      <!-- Main Body -->
      <article id="mainColumn">
        
  <h1 class="pageTitle">virtualenv Bootstrapping</h1>
    <p class="pageDate">January 02, 2011</p>
  <p><a href="http://virtualenv.openplans.org/">virtualenv </a>is a tool to create isolated Python environments. <a href="http://pip.openplans.org/">pip</a> installs Python packages. Together, they're awesome.</p>
<p>In the virtualenv documentation, Ian Bicking gives a recipe for <a href="http://virtualenv.openplans.org/#creating-your-own-bootstrap-scripts"> creating project bootstrap scripts</a> that set up an environment and then perform custom steps to populate it. The bootstrap script is self-contained: it doesn't require the person running it to have virtualenv installed. The downside is that producing the bootstrap script requires running another script that invokes <code>virtualenv.create_bootstrap_script</code> and writing the result to disk.</p>
<p>If you're willing to treat virtualenv as a pre-requisite, there's an alternative recipe that doesn't require the script-creating-a-script level of indirection. Import the <code>virtualenv</code> module, define the hook functions in its scope, and then execute its <code>main</code> function.</p>
<p>For example, here's a bootstrap script that creates a virtual environment, installs the HEAD of the Tornado's master branch from GitHub, writes a script that runs a Tornado server with a static file handler pointing to a <code>www</code> directory, makes the run script executable, and dumps a hello world <code>index.html</code> file into the root of the static path.</p>
<script src="https://gist.github.com/763048.js"> </script>

<p>You can execute this script, giving it a path to where you want the virtual environment to reside. After it completes, you can activate that environment and execute the <code>run_server.py</code> script it generates to start the Tornado server. Visiting <code>http://localhost:8080/static/index.html</code> in your browser shows the hello world page the <code>setup_tornadoenv.py</code> generated.</p>
<div class="codehilite"><pre><span></span>$ ./setup_tornadoenv.py ~/envs/my_app
$ <span class="nb">source</span> ~/envs/my_app/bin/activate
$ run_server.py <span class="p">&amp;</span>
$ open http://localhost:8080/static/index.html
</pre></div>


<p>Of course, you can reuse the setup script to create additional, isolated environments.</p>
<div class="codehilite"><pre><span></span>$ deactivate      <span class="c1"># get out of the my_app env</span>
$ ./setup_tornadoenv.py ~/envs/my_other_app
$ . ~/envs/my_other_app/bin/activate
$ run_server.py --port<span class="o">=</span><span class="m">9000</span> <span class="p">&amp;</span>
$ open http://localhost:9000/static/index.html
</pre></div>


<p>If you install <a href="http://www.doughellmann.com/projects/virtualenvwrapper/">virtualenvwrapper</a>, switching among the separate server environments is even easier.</p>
<div class="codehilite"><pre><span></span>$ deactivate                  <span class="c1"># get out of the my_other_app env</span>
$ sudo pip install virtualenvwrapper
$ <span class="nb">export</span> <span class="nv">WORKON_HOME</span><span class="o">=</span>~/envs   <span class="c1"># or add this to .bashrc or .bash_profile</span>
$ <span class="nb">source</span> /usr/local/bin/virtualenvwrapper.sh <span class="c1"># same here</span>
$ workon my_app               <span class="c1"># now in the my_app env</span>
$ workon my_other_app         <span class="c1"># now in the other</span>
$ deactivate                  <span class="c1"># now in the system env</span>
</pre></div>


<p>You can always add arguments to the bootstrap script to increase its flexibility too. Imagine options for what version of Tornado to fetch, the default port number, manging the server under supervisord, etc.</p>

      </article>

      <!-- Meta -->
      
    <div class="footerSection" id="pageMeta">
        <h3>Another Read: <a href="../pyttsx-on-github">pyttsx on GitHub &#187;</a></h3>
        <div class="excerpt"><p>After many months of no activity, I've moved the <a href="https://github.com/parente/pyttsx">main development branch of pyttsx</a> from Launchpad to GitHub. I originally put the code on Launchpad when I was exploring new version control systems. As I've long since settled on git and GitHub for my other projects, it was about time to move pyttsx there too.</p></div>
    </div>


      <div class="row footerSection" id="siteMeta">
        <div class="col-md-4" id="contact">
          <h3>Contact</h3>
          <div>
            <i class="fa fa-envelope-o fa-fw"></i> <a title="Email address" href="mailto:parente@cs.unc.edu"> parente@cs.unc.edu</a><br/>
            <i class="fa fa-github fa-fw"></i> <a title="GitHub account" href="https://github.com/parente">github.com/parente</a><br/>
            <i class="fa fa-twitter fa-fw"></i> <a title="Twitter account" href="https://twitter.com/parente">twitter.com/parente</a><br/>
            <i class="fa fa-google-plus fa-fw"></i> <a title="Google Plus account" href="https://plus.google.com/108324270881375083602/">google.com/+PeterParente</a>
          </div>
        </div>

        <div class="col-md-5" id="latest">
          <h3>Latest</h3>
          <ul>
            <li><a href="../jupyter-tidbit-binder-from-browser">Jupyter Tidbit: Launch Notebook on Binder without leaving your browser</a></li>
            <li><a href="../jupyter-tidbit-clear-outputs">Jupyter Tidbit: Use nbconvert to clear notebook outputs</a></li>
            <li><a href="../jupyter-tidbit-run-ipynb-files">Jupyter Tidbit: %run your ipynb file</a></li>
            <li><a href="../flatten-nested-json-with-pandas">Flatten Nested JSON with Pandas</a></li>
          </ul>
        </div>

        <div class="col-md-3" id="other">
          <h3>More</h3>
          <ul>
            <li><a href="../posts/">See all posts &#187;</a></li>
            <li><a href="../feed/index.xml">Subscribe to posts &#187;</a></li>
          </ul>
        </div>
      </div>

      <!-- Footer -->
      <footer id="siteFooter" class="footerSection">
        <p class="footerText">Copyright &copy; 2008, 2018 Peter Parente. All rights reserved. Except for materials otherwise noted. </p>
      </footer>
    </div>
  </body>
</html>